
//load core module - "events"
var EventEmitter = require('events').EventEmitter;

//load core module - "util"
var util = require('util');

function Security() {
	//binds properties of EventEmitter to Security
	EventEmitter.call(this); 

	this.authenticate = function(uid, pwd) {
		setTimeout(function(emitter, u, p){
			if (u == 'admin' && p == 'admin') {
				var user = { userName : 'Saidi', role : ['admin'] }
				emitter.emit('LOGIN_SUCCESS', undefined, user);
			}
			else {
				var err = { errText : 'Invalid credentials' };
				emitter.emit('LOGIN_FAILED', err);
			}
		},1000, this, uid, pwd);		
	}
	this.logout = function(user) {
		this.emit('LOGOUT_DONE');
	}
}

//inherit security from EventEmitter
util.inherits(Security, EventEmitter);

exports.Security = Security;